<!doctype html><html class="bg-white antialiased" lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Relationships"><title>Relationships - Flutter Data</title><link rel=stylesheet href=/main.css><link rel=stylesheet href=/css/fonts.css data><link rel=icon href=/images/favicon.png type=image/png></head><body><div class="flex bg-white border-b border-gray-200 fixed top-0 inset-x-0 z-50 h-16 items-center"><div class="w-full max-w-6xl relative mx-auto pl-2 pr-4 md:pl-4 md:pr-6"><div class="flex items-center -mx-6"><div class="lg:w-1/4 pl-6 pr-4 sm:pr-12 lg:pr-8"><div class="flex items-center"><h1 class="mt-2 whitespace-no-wrap"><a class="no-underline text-gray-800" href=/><img class=inline-block style=object-fit:cover;width:36px;height:36px src=/images/fd.png>
<span class="hidden sm:inline align-middle text-2xl mb-4 font-bold tracking-tighter">Flutter
Data</span></a></h1></div></div><div class="flex flex-grow min-w-0 lg:w-3/4"><div class="w-full lg:px-2"><ul class="flex flex-row"><li class=inline-block><a class="no-underline focus:outline-none focus-visible:shadow-outline mr-5 lg:mr-7 px-1 text-gray-700 hover:text-gray-900
active" href=/docs/>Docs</a></li><li class=inline-block><a class="no-underline focus:outline-none focus-visible:shadow-outline mr-5 lg:mr-7 px-1 text-gray-700 hover:text-gray-900" href=/tutorial/>Tutorial</a></li><li class=inline-block><a class="no-underline focus:outline-none focus-visible:shadow-outline mr-5 lg:mr-7 px-1 text-gray-700 hover:text-gray-900" href=/articles/>Articles</a></li></ul></div><button type=button id=sidebar-open class="flex px-6 items-center lg:hidden bg-white text-gray-500 focus:outline-none focus:text-gray-700"><svg class="fill-current w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button>
<button type=button id=sidebar-close class="flex px-6 items-center lg:hidden bg-white text-gray-500 focus:outline-none focus:text-gray-700 hidden"><svg class="fill-current w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 8.586 2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"/></svg></button><div class="hidden lg:flex lg:items-center lg:justify-between px-6"><div class="flex justify-start items-center text-gray-500"><a class="no-underline focus:outline-none focus-visible:shadow-outline w-24 mr-5 lg:mr-7 px-1 font-medium text-gray-600 hover:text-gray-900" href=https://pub.dev/packages/flutter_data/><strong>v1.4.4</strong></a>
<a href=https://twitter.com/flutterdata class="focus:outline-none focus-visible:shadow-outline px-1 mr-5 text-gray-600 hover:text-gray-900"><svg class="h-5 fill-current" viewBox="0 0 20 20"><title>Twitter</title><path d="M6.29 18.25c7.55.0 11.67-6.25 11.67-11.67v-.53c.8-.59 1.49-1.3 2.04-2.13-.75.33-1.54.55-2.36.65a4.12 4.12.0 001.8-2.27c-.8.48-1.68.81-2.6 1a4.1 4.1.0 00-7 3.74 11.65 11.65.0 01-8.45-4.3 4.1 4.1.0 001.27 5.49C2.01 8.2 1.37 8.03.8 7.7v.05a4.1 4.1.0 003.3 4.03 4.1 4.1.0 01-1.86.07 4.1 4.1.0 003.83 2.85A8.23 8.23.0 010 16.4a11.62 11.62.0 006.29 1.84"/></svg></a><a href=https://github.com/flutterdata/flutter_data class="focus:outline-none focus-visible:shadow-outline px-1 text-gray-600 hover:text-gray-900"><svg viewBox="0 0 20 20" class="h-5 fill-current"><title>GitHub</title><path d="M10 0A10 10 0 006.84 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94.0-1.1.39-1.99 1.03-2.69a3.6 3.6.0 01.1-2.64s.84-.27 2.75 1.02a9.58 9.58.0 015 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69.0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0010 0"/></svg></a></div></div></div></div></div></div></div><div class="w-full max-w-6xl mx-auto px-3 lg:flex"><div id=sidebar class="fixed inset-0 h-full bg-white z-40 w-full border-b -mb-16 lg:-mb-0 lg:static lg:h-auto lg:overflow-y-visible lg:border-b-0 lg:pt-0 lg:w-1/4 lg:block lg:border-0 pt-16 hidden"><div class="h-full overflow-y-auto scrolling-touch lg:h-auto lg:block lg:sticky lg:bg-transparent overflow-hidden lg:top-0 bg-white"><nav class="pl-2 pr-6 overflow-y-auto text-base lg:text-md lg:py-20"><p class=lg:hidden>v1.4.4</p><ul class=list-none><li class=mt-2><a href=/docs/quickstart/><span>Quickstart</span></a></li><li class=mt-2><a href=/docs/repositories/><span>Repositories</span></a></li><li class=mt-2><a href=/docs/adapters/><span>Adapters</span></a></li><li class=mt-2><a href=/docs/models/><span>Models</span></a></li><li class="mt-2 active"><a href=/docs/relationships/><span>Relationships</span></a><div class=ml-2><nav id=TableOfContents><ul><li><a href=#defaults>Defaults</a></li><li><a href=#inverses>Inverses</a></li><li><a href=#remove-a-relationship>Remove a relationship</a></li><li><a href=#disable-relationship-serialization>Disable relationship serialization</a></li><li><a href=#self-referential-relationships>Self-referential relationships</a></li><li><a href=#relationship-extensions>Relationship extensions</a></li></ul></nav></div></li><li class=mt-2><a href=/docs/initialization/><span>Initialization</span></a></li><li class=mt-2><a href=/docs/faq/><span>FAQ</span></a></li><li class=mt-8></li><li class=mt-2><a href=https://pub.dev/documentation/flutter_data/latest/>API Reference
(v1.4.4)</a></li></ul></nav></div></div><div id=wrapper class="min-h-screen w-full lg:static lg:max-h-full lg:overflow-visible lg:pr-6 pt-20 lg:w-3/4"><div class=w-full><h1 class="text-4xl md:text-5xl font-bold leading-tight tracking-tighter break-normal pb-2 mt-2">Relationships</h1><div class="text-lg text-gray-800"><p>Flutter Data features an advanced relationship mapping system.</p><p>Use:</p><ul><li><code>HasMany&lt;T></code> for to-many relationships</li><li><code>BelongsTo&lt;T></code> for to-one relationships</li></ul><p>As an example, a <code>User</code> has many <code>Task</code>s:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>JsonSerializable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([</span><span class=n>JSONServerAdapter</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>User</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>int</span><span class=o>?</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>String</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class="line hl"><span class=cl>  <span class=kd>final</span> <span class=n>HasMany</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;?</span> <span class=n>tasks</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>User</span><span class=p>({</span><span class=k>this</span><span class=p>.</span><span class=n>id</span><span class=p>,</span> <span class=kd>required</span> <span class=k>this</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>tasks</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>and a <code>Task</code> belongs to a <code>User</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>JsonSerializable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([</span><span class=n>JSONServerAdapter</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Task</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>int</span><span class=o>?</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>String</span> <span class=n>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>bool</span> <span class=n>completed</span><span class=p>;</span>
</span></span><span class="line hl"><span class=cl>  <span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;?</span> <span class=n>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Task</span><span class=p>({</span><span class=k>this</span><span class=p>.</span><span class=n>id</span><span class=p>,</span> <span class=kd>required</span> <span class=k>this</span><span class=p>.</span><span class=n>title</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>completed</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>user</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>As long as the API responds correctly with relationship data (for example a <code>User</code> resource with a collection of <code>Task</code> models â€“ or just IDs if models are already present in local storage) we can expect the following to work:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>user</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>repository</span><span class=p>.</span><span class=n>findOne</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=nl>params:</span> <span class=p>{</span><span class=s1>&#39;_embed&#39;</span><span class=o>:</span> <span class=s1>&#39;tasks&#39;</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=n>user</span><span class=o>!</span><span class=p>.</span><span class=n>tasks</span><span class=o>!</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>task</span><span class=p>.</span><span class=n>title</span><span class=p>);</span> <span class=c1>// write Flutter Data docs
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>print</span><span class=p>(</span><span class=n>task</span><span class=p>.</span><span class=n>user</span><span class=o>!</span><span class=p>.</span><span class=n>value</span><span class=o>!</span><span class=p>.</span><span class=n>name</span><span class=p>);</span> <span class=c1>// Frank
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// or
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>house</span> <span class=o>=</span> <span class=n>House</span><span class=p>(</span><span class=nl>address:</span> <span class=s1>&#39;123 Main Rd&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>family</span> <span class=o>=</span> <span class=n>Family</span><span class=p>(</span><span class=nl>surname:</span> <span class=s1>&#39;Assange&#39;</span><span class=p>,</span> <span class=nl>house:</span> <span class=n>BelongsTo</span><span class=p>(</span><span class=n>house</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>print</span><span class=p>(</span><span class=n>family</span><span class=p>.</span><span class=n>house</span><span class=p>.</span><span class=n>value</span><span class=p>.</span><span class=n>families</span><span class=p>.</span><span class=n>first</span><span class=p>.</span><span class=n>surname</span><span class=p>);</span>  <span class=c1>// Free Assange
</span></span></span></code></pre></div><p>We can infinitely navigate the relationship graph as it&rsquo;s based on a reactive graph data structure (<code>GraphNotifier</code>).</p><h2 id=defaults>Defaults</h2><p>For relationships to work they must not be <code>null</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=n>Task</span><span class=p>(</span><span class=nl>title:</span> <span class=s1>&#39;do 1&#39;</span><span class=p>,</span> <span class=nl>user:</span> <span class=n>BelongsTo</span><span class=p>());</span>
</span></span></code></pre></div><p>If we don&rsquo;t want to supply a new relationship object like above, we may provide defaults like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>JsonSerializable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([</span><span class=n>JSONServerAdapter</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Task</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>int</span><span class=o>?</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>String</span> <span class=n>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>bool</span> <span class=n>completed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>late</span> <span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl>  <span class=n>Task</span><span class=p>({</span><span class=k>this</span><span class=p>.</span><span class=n>id</span><span class=p>,</span> <span class=kd>required</span> <span class=k>this</span><span class=p>.</span><span class=n>title</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>completed</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;?</span> <span class=n>user</span><span class=p>})</span> <span class=o>:</span>
</span></span><span class="line hl"><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>user</span> <span class=o>??</span> <span class=n>BelongsTo</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=inverses>Inverses</h2><p>Inverse relationships are guessed when unambiguous (one relationship of inverse type).</p><p>Not in this case, as <code>Family</code> has two <code>BelongsTo&lt;House></code>s:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>JsonSerializable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([])</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Family</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>Family</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>String</span><span class=o>?</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>House</span><span class=o>&gt;?</span> <span class=n>cottage</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>House</span><span class=o>&gt;?</span> <span class=n>residence</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Family</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>cottage</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>residence</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>JsonSerializable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([])</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>House</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>House</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>String</span><span class=o>?</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>Family</span><span class=o>&gt;?</span> <span class=n>owner</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>House</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>Family</span><span class=o>&gt;?</span> <span class=n>owner</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span> <span class=o>:</span> <span class=n>owner</span> <span class=o>=</span> <span class=n>owner</span> <span class=o>??</span> <span class=n>BelongsTo</span><span class=p>();</span>
</span></span></code></pre></div><p>If you wish to disambuiguate or to be explicit, annotate your relationship in the <code>House</code> model:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>DataRelationship</span><span class=p>(</span><span class=nl>inverse:</span> <span class=s1>&#39;residence&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>Family</span><span class=o>&gt;?</span> <span class=n>owner</span><span class=p>;</span>
</span></span></code></pre></div><p>Here&rsquo;s another example, a tree structure using custom inverses and Freezed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>freezed</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([],</span> <span class=nl>remote:</span> <span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Node</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>_$Node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Node</span><span class=p>.</span><span class=n>_</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kd>factory</span> <span class=n>Node</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=kt>int</span><span class=o>?</span> <span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=kt>String</span><span class=o>?</span> <span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=err>@</span><span class=n>DataRelationship</span><span class=p>(</span><span class=nl>inverse:</span> <span class=s1>&#39;children&#39;</span><span class=p>)</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&gt;?</span> <span class=n>parent</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=err>@</span><span class=n>DataRelationship</span><span class=p>(</span><span class=nl>inverse:</span> <span class=s1>&#39;parent&#39;</span><span class=p>)</span> <span class=n>HasMany</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&gt;?</span> <span class=n>children</span><span class=p>})</span> <span class=o>=</span> <span class=n>_Node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>factory</span> <span class=n>Node</span><span class=p>.</span><span class=n>fromJson</span><span class=p>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;</span> <span class=n>json</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>_$NodeFromJson</span><span class=p>(</span><span class=n>json</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=remove-a-relationship>Remove a relationship</h2><p>Given a <code>Post</code> with many <code>Comment</code>s we want to remove:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>postWithNoComments</span> <span class=o>=</span> <span class=n>post</span><span class=p>.</span><span class=n>copyWith</span><span class=p>(</span><span class=nl>comments:</span> <span class=n>HasMany</span><span class=p>.</span><span class=n>remove</span><span class=p>()).</span><span class=n>was</span><span class=p>(</span><span class=n>post</span><span class=p>);</span>
</span></span></code></pre></div><p>Works with both <code>HasMany</code> and <code>BelongsTo</code>.</p><p>Removing a relationship does not delete its linked resources (the actual comments in this case).</p><h2 id=disable-relationship-serialization>Disable relationship serialization</h2><p>In order to keep the relationship working but avoid persisting it, use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>DataRelationship</span><span class=p>(</span><span class=nl>serialize:</span> <span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>Post</span><span class=o>&gt;?</span> <span class=n>post</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=self-referential-relationships>Self-referential relationships</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=c1>// in Post
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>@</span><span class=n>DataRelationship</span><span class=p>(</span><span class=nl>serialize:</span> <span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>late</span> <span class=n>BelongsTo</span><span class=o>&lt;</span><span class=n>Post</span><span class=o>&gt;</span> <span class=n>post</span> <span class=o>=</span> <span class=n>asBelongsTo</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=relationship-extensions>Relationship extensions</h2><p>A <code>User</code> with <code>Task</code>s could be created like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>t1</span> <span class=o>=</span> <span class=n>Task</span><span class=p>(</span><span class=nl>title:</span> <span class=s1>&#39;do 1&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>t2</span> <span class=o>=</span> <span class=n>Task</span><span class=p>(</span><span class=nl>title:</span> <span class=s1>&#39;do 2&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=nl>name:</span> <span class=s1>&#39;Frank&#39;</span><span class=p>,</span> <span class=nl>tasks:</span> <span class=n>HasMany</span><span class=p>({</span><span class=n>t1</span><span class=p>,</span> <span class=n>t2</span><span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// or using an extension on Set&lt;DataModel&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=nl>name:</span> <span class=s1>&#39;Frank&#39;</span><span class=p>,</span> <span class=nl>tasks:</span> <span class=p>{</span><span class=n>t1</span><span class=p>,</span> <span class=n>t2</span><span class=p>}.</span><span class=n>asHasMany</span><span class=p>);</span>
</span></span></code></pre></div><p>or a <code>Task</code> with <code>User</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=nl>name:</span> <span class=s1>&#39;Frank&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=n>Task</span><span class=p>(</span><span class=nl>title:</span> <span class=s1>&#39;do 1&#39;</span><span class=p>,</span> <span class=nl>user:</span> <span class=n>BelongsTo</span><span class=p>(</span><span class=n>user</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// or using an extension on DataModel
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=n>Task</span><span class=p>(</span><span class=nl>title:</span> <span class=s1>&#39;do 1&#39;</span><span class=p>,</span> <span class=nl>user:</span> <span class=n>user</span><span class=p>.</span><span class=n>asBelongsTo</span><span class=p>);</span>
</span></span></code></pre></div><div class="my-8 bg-green-50 border-dashed border-8 border-green-600"><form name=contact class="mt-6 px-4 pb-6 w-full" method=post onsubmit="return window.submitContact(this,!1)" netlify><h3 class="initial my-0">Need professional help with Flutter?</h3><div class="initial text-sm py-4">Describe your project in detail and include your e-mail and budget.</div><textarea name=body class="initial h-32 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 mb-4 text-gray-700 leading-tight focus:outline-none text-sm" id=inline-body></textarea>
<input type=submit class="initial shadow bg-gray-600 text-sm hover:bg-gray-500 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded" value="Send message"><div class="form-success hidden"><p class="text-left text-gray-800 text-lg font-bold">Message sent.<br><br>Thank you! I will get back to you shortly.</p></div><div class="form-error hidden"><p class="text-left text-red-800 text-lg font-bold">An error has occurred. Please e-mail me@frank06.net with your request.</p></div></form></div></div></div></div></div><footer class="py-12 mt-20 text-white bg-gray-900 pattern"><div class="w-full max-w-6xl relative mx-auto pl-2 pr-4 md:pl-4 md:pr-6"><div class="flex items-center"><div class="lg:w-1/4 pl-6 pr-4 sm:pr-12 lg:pr-8"></div><div class="flex flex-grow min-w-0 lg:w-3/4"><div class="w-full lg:px-2"><p><a class=inline-block href=https://github.com/flutterdata/flutter_data/actions><img alt=tests src="https://img.shields.io/github/workflow/status/flutterdata/flutter_data/test/master?label=tests&labelColor=333940&logo=github"></a>
<a class=inline-block href=https://codecov.io/gh/flutterdata/flutter_data rel=nofollow><img alt=codecov src=https://codecov.io/gh/flutterdata/flutter_data/branch/master/graph/badge.svg style=max-width:100%></a>
<a class=inline-block href=https://pub.dev/packages/flutter_data rel=nofollow><img alt=pub.dev src="https://img.shields.io/pub/v/flutter_data?label=pub.dev&labelColor=333940&logo=dart" style=max-width:100%></a>
<a class=inline-block href=https://github.com/flutterdata/flutter_data/blob/master/LICENSE><img alt=license src="https://img.shields.io/github/license/flutterdata/flutter_data?color=%23007A88&labelColor=333940&logo=mit" style=max-width:100%></a></p><p class=text-sm>Created and maintained by <a href=https://github.com/frank06/>frank06</a>.</p></div><div class="hidden lg:flex lg:items-center lg:justify-between px-6"><h1 class="mt-2 whitespace-no-wrap"><img class=inline style=object-fit:cover;width:100% src=/images/fd.png></h1></div></div></div></div></footer><script>const _open=function(){document.getElementById("sidebar").classList.remove("hidden"),document.getElementById("wrapper").classList.add("overflow-hidden","max-h-screen","fixed"),document.getElementById("sidebar-open").classList.toggle("hidden"),document.getElementById("sidebar-close").classList.toggle("hidden")},_close=function(){document.getElementById("sidebar").classList.add("hidden"),document.getElementById("wrapper").classList.remove("overflow-hidden","max-h-screen","fixed"),document.getElementById("sidebar-open").classList.toggle("hidden"),document.getElementById("sidebar-close").classList.toggle("hidden")};document.getElementById("sidebar-open").onclick=_open,document.getElementById("sidebar-close").onclick=_close,[].forEach.call(document.querySelectorAll('a[href^="#"]'),e=>{e.onclick=_close}),window.domReady=function(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener("DOMContentLoaded",e)},window.domReady(function(){for(var n,s,t=document.links,o=new RegExp("//"+location.host+"($|/)"),e=0;e<t.length;e++)n=t[e].href,s=n.substring(0,4)!=="http"||o.test(n),s||(t[e].target="_blank")}),window.submitContact=function(e){var n,s="/";return!1&&(s="(signup url)"),n=new FormData(e),n.set("url",window.location.href),fetch(s,{method:"POST",mode:"no-cors",body:n}).then(t=>{e.querySelector(".form-success").style.display="block"}).catch(()=>{e.querySelector(".form-error").style.display="block"}).finally(()=>{[].slice.call(e.querySelectorAll(".initial")).forEach(function(e){e.style.display="none"})}),!1}</script></body></html>