<!doctype html><html class="bg-white antialiased" lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=twitter:title content="Repositories"><title>Repositories - Flutter Data</title><link rel=stylesheet href=/main.css><link rel=stylesheet href=/css/fonts.css data><link rel=icon href=/images/favicon.png type=image/png></head><body><div class="flex bg-white border-b border-gray-200 fixed top-0 inset-x-0 z-50 h-16 items-center"><div class="w-full max-w-6xl relative mx-auto pl-2 pr-4 md:pl-4 md:pr-6"><div class="flex items-center -mx-6"><div class="lg:w-1/4 pl-6 pr-4 sm:pr-12 lg:pr-8"><div class="flex items-center"><h1 class="mt-2 whitespace-no-wrap"><a class="no-underline text-gray-800" href=/><img class=inline-block style=object-fit:cover;width:36px;height:36px src=/images/fd.png>
<span class="hidden sm:inline align-middle text-2xl mb-4 font-bold tracking-tighter">Flutter
Data</span></a></h1></div></div><div class="flex flex-grow min-w-0 lg:w-3/4"><div class="w-full lg:px-2"><ul class="flex flex-row"><li class=inline-block><a class="no-underline focus:outline-none focus-visible:shadow-outline mr-5 lg:mr-7 px-1 text-gray-700 hover:text-gray-900
active" href=/docs/>Docs</a></li><li class=inline-block><a class="no-underline focus:outline-none focus-visible:shadow-outline mr-5 lg:mr-7 px-1 text-gray-700 hover:text-gray-900" href=/tutorial/>Tutorial</a></li><li class=inline-block><a class="no-underline focus:outline-none focus-visible:shadow-outline mr-5 lg:mr-7 px-1 text-gray-700 hover:text-gray-900" href=/articles/>Articles</a></li></ul></div><button type=button id=sidebar-open class="flex px-6 items-center lg:hidden bg-white text-gray-500 focus:outline-none focus:text-gray-700"><svg class="fill-current w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button>
<button type=button id=sidebar-close class="flex px-6 items-center lg:hidden bg-white text-gray-500 focus:outline-none focus:text-gray-700 hidden"><svg class="fill-current w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 8.586 2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"/></svg></button><div class="hidden lg:flex lg:items-center lg:justify-between px-6"><div class="flex justify-start items-center text-gray-500"><a class="no-underline focus:outline-none focus-visible:shadow-outline w-24 mr-5 lg:mr-7 px-1 font-medium text-gray-600 hover:text-gray-900" href=https://pub.dev/packages/flutter_data/><strong>v1.5.6</strong></a>
<a href=https://twitter.com/flutterdata class="focus:outline-none focus-visible:shadow-outline px-1 mr-5 text-gray-600 hover:text-gray-900"><svg class="h-5 fill-current" viewBox="0 0 20 20"><title>Twitter</title><path d="M6.29 18.25c7.55.0 11.67-6.25 11.67-11.67v-.53c.8-.59 1.49-1.3 2.04-2.13-.75.33-1.54.55-2.36.65a4.12 4.12.0 001.8-2.27c-.8.48-1.68.81-2.6 1a4.1 4.1.0 00-7 3.74 11.65 11.65.0 01-8.45-4.3 4.1 4.1.0 001.27 5.49C2.01 8.2 1.37 8.03.8 7.7v.05a4.1 4.1.0 003.3 4.03 4.1 4.1.0 01-1.86.07 4.1 4.1.0 003.83 2.85A8.23 8.23.0 010 16.4a11.62 11.62.0 006.29 1.84"/></svg></a><a href=https://github.com/flutterdata/flutter_data class="focus:outline-none focus-visible:shadow-outline px-1 text-gray-600 hover:text-gray-900"><svg viewBox="0 0 20 20" class="h-5 fill-current"><title>GitHub</title><path d="M10 0A10 10 0 006.84 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94.0-1.1.39-1.99 1.03-2.69a3.6 3.6.0 01.1-2.64s.84-.27 2.75 1.02a9.58 9.58.0 015 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69.0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0010 0"/></svg></a></div></div></div></div></div></div></div><div class="w-full max-w-6xl mx-auto px-3 lg:flex"><div id=sidebar class="fixed inset-0 h-full bg-white z-40 w-full border-b -mb-16 lg:-mb-0 lg:static lg:h-auto lg:overflow-y-visible lg:border-b-0 lg:pt-0 lg:w-1/4 lg:block lg:border-0 pt-16 hidden"><div class="h-full overflow-y-auto scrolling-touch lg:h-auto lg:block lg:sticky lg:bg-transparent overflow-hidden lg:top-0 bg-white"><nav class="pl-2 pr-6 overflow-y-auto text-base lg:text-md lg:py-20"><p class=lg:hidden>v1.5.6</p><ul class=list-none><li class=mt-2><a href=/docs/quickstart/><span>Quickstart</span></a></li><li class="mt-2 active"><a href=/docs/repositories/><span>Repositories</span></a><div class=ml-2><nav id=TableOfContents><ul><li><a href=#finders>Finders</a></li><li><a href=#save-and-delete>Save and delete</a></li><li><a href=#watchers>Watchers</a></li><li><a href=#common-arguments>Common arguments</a></li><li><a href=#logging-and-labels>Logging and labels</a></li><li><a href=#local-adapters>Local adapters</a></li><li><a href=#graph>Graph</a></li><li><a href=#architecture-overview>Architecture overview</a></li></ul></nav></div></li><li class=mt-2><a href=/docs/adapters/><span>Adapters</span></a></li><li class=mt-2><a href=/docs/local-adapters/><span>Local Adapters</span></a></li><li class=mt-2><a href=/docs/models/><span>Models</span></a></li><li class=mt-2><a href=/docs/relationships/><span>Relationships</span></a></li><li class=mt-2><a href=/docs/offline/><span>Offline</span></a></li><li class=mt-2><a href=/docs/initialization/><span>Initialization</span></a></li><li class=mt-2><a href=/docs/faq/><span>FAQ</span></a></li><li class=mt-8></li><li class=mt-2><a href=https://pub.dev/documentation/flutter_data/latest/>API Reference
(v1.5.6)</a></li></ul></nav></div></div><div id=wrapper class="min-h-screen w-full lg:static lg:max-h-full lg:overflow-visible lg:pr-6 pt-20 lg:w-3/4"><div class=w-full><h1 class="text-4xl md:text-5xl font-bold leading-tight tracking-tighter break-normal pb-2 mt-2">Repositories</h1><div class="text-lg text-gray-800"><p>Flutter Data is organized around the concept of <a href=/docs/models>models</a> which are data classes extending <code>DataModel</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([</span><span class=n>TaskAdapter</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Task</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>int</span><span class=o>?</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>String</span> <span class=n>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=kt>bool</span> <span class=n>completed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Task</span><span class=p>({</span><span class=k>this</span><span class=p>.</span><span class=n>id</span><span class=p>,</span> <span class=kd>required</span> <span class=k>this</span><span class=p>.</span><span class=n>title</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=n>completed</span> <span class=o>=</span> <span class=kc>false</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>When annotated with <code>@DataRepository</code> (and <a href=/docs/adapters>adapters</a> as arguments, as we&rsquo;ll see later) a model gets its own fully-fledged repository.</p><p><code>Repository</code> is the API used to interact with models, whether local or remote.</p><p>Assuming a <code>Task</code> model and its corresponding <code>Repository&lt;Task></code>, let&rsquo;s see how to retrieve such resources from an API.</p><h2 id=finders>Finders</h2><h3 id=findall>findAll</h3><p>Using <code>ref.tasks</code> (short for <code>ref.watch(tasksRepositoryProvider)</code>) to obtain a repository we can find all resources in the collection.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Repository</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=n>repository</span> <span class=o>=</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>tasks</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>repository</span><span class=p>.</span><span class=n>findAll</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GET http://base.url/tasks
</span></span></span></code></pre></div><p>This async call triggered a request to <code>GET http://base.url/tasks</code>.</p><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><h4 id=understanding-the-magic->Understanding the magic âœ¨</h4><p><strong>How exactly does Flutter Data resolve the <code>http://base.url/tasks</code> URL?</strong></p><p>Flutter Data <a href=/docs/adapters>adapters</a> define functions and getters such as <code>urlForFindAll</code>, <code>baseUrl</code> and <code>type</code> among many others.</p><p>In this case, <code>findAll</code> will look up information in <code>baseUrl</code> and <code>urlForFindAll</code> (which defaults to <code>type</code>, and <code>type</code> defaults to <code>tasks</code>).</p><p>Result? <code>http://base.url/tasks</code>.</p><p><strong>And, how exactly does Flutter Data instantiate <code>Task</code> models?</strong></p><p>Flutter Data ships with a built-in serializer/deserializer for <a href=https://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html>classic JSON</a>. It means that the default serialized form of a <code>Task</code> instance looks like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;delectus aut autem&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;completed&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Of course, this too can be overridden like the <a href=https://github.com/flutterdata/flutter_data_json_api_adapter/>JSON API Adapter</a> does.</p></div><p>Method signature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Future</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?&gt;</span> <span class=n>findAll</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>remote</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>background</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;?</span> <span class=n>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>String</span><span class=o>&gt;?</span> <span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>syncLocal</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnSuccessAll</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onSuccess</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnErrorAll</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onError</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>DataRequestLabel</span><span class=o>?</span> <span class=n>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>Further information on the <code>remote</code>, <code>background</code>, <code>params</code>, <code>headers</code>, <code>onSuccess</code>, <code>onError</code> and <code>label</code> arguments available in <a href=#common-arguments>common arguments</a> below.</p><p>The <code>syncLocal</code> argument instructs local storage to synchronize the exact resources returned from the remote source (for example, to reflect server-side deletions).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>tasks</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>findAll</span><span class=p>(</span><span class=nl>syncLocal:</span> <span class=kc>true</span><span class=p>);</span>
</span></span></code></pre></div><p>Consider this example:</p><p>If a first call to <code>findAll</code> returns data for task IDs <code>1</code>, <code>2</code>, <code>3</code> and a second call updated data for <code>2</code>, <code>3</code>, <code>4</code> you will end up in your local storage with: <code>1</code>, <code>2</code> (updated), <code>3</code> (updated) and <code>4</code>.</p><p>Passing <code>syncLocal: true</code> to the second call will leave the local storage state with <code>2</code>, <code>3</code> and <code>4</code>.</p><p>ðŸ“š <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/findAll.html>See API docs</a></p><h3 id=findone>findOne</h3><p>Finds a resource by ID and saves it in local storage.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>findOne</span><span class=p>(</span><span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GET http://base.url/tasks/1
</span></span></span></code></pre></div><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><p>Similar to what&rsquo;s shown above in <a href=#findall>findAll</a>, Flutter Data resolves the URL by using the <code>urlForFindOne</code> function. We can override this in an <a href=/docs/adapters>adapter</a>.</p><p>For example, use path <code>/tasks/something/1</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>mixin</span> <span class=n>TaskURLAdapter</span> <span class=n>on</span> <span class=n>RemoteAdapter</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>urlForFindOne</span><span class=p>(</span><span class=n>id</span><span class=p>,</span> <span class=n>params</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=s1>&#39;</span><span class=si>$</span><span class=n>type</span><span class=s1>/something/</span><span class=si>$</span><span class=n>id</span><span class=s1>&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// would result in GET http://base.url/tasks/something/1
</span></span></span></code></pre></div></div><p>It can also take a <code>T</code> with an ID:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>findOne</span><span class=p>(</span><span class=n>anotherTaskWithId3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GET http://base.url/tasks/3
</span></span></span></code></pre></div><p>Method signature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Future</span><span class=o>&lt;</span><span class=n>T</span><span class=o>?&gt;</span> <span class=n>findOne</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kt>Object</span> <span class=n>id</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>remote</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>background</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;?</span> <span class=n>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>String</span><span class=o>&gt;?</span> <span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnSuccessOne</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onSuccess</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnErrorOne</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onError</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>DataRequestLabel</span><span class=o>?</span> <span class=n>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>The <code>remote</code>, <code>background</code>, <code>params</code>, <code>headers</code>, <code>onSuccess</code>, <code>onError</code> and <code>label</code> arguments are detailed in <a href=#common-arguments>common arguments</a> below.</p><p>ðŸ“š <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/findOne.html>See API docs</a></p><h2 id=save-and-delete>Save and delete</h2><h3 id=save>save</h3><p>Persists a model to local storage and remote.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>savedTask</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>repository</span><span class=p>.</span><span class=n>save</span><span class=p>(</span><span class=n>task</span><span class=p>);</span>
</span></span></code></pre></div><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><p>Want to use the <code>PUT</code> verb instead of <code>PATCH</code>? Use this <a href=/docs/adapters>adapter</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>mixin</span> <span class=n>TaskURLAdapter</span> <span class=n>on</span> <span class=n>RemoteAdapter</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span> <span class=n>methodForSave</span><span class=p>(</span><span class=n>id</span><span class=p>,</span> <span class=n>params</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>id</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>?</span> <span class=n>DataRequestMethod</span><span class=p>.</span><span class=n>PUT</span> <span class=o>:</span> <span class=n>DataRequestMethod</span><span class=p>.</span><span class=n>POST</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div><p>Method signature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Future</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>save</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>T</span> <span class=n>model</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>remote</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;?</span> <span class=n>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>String</span><span class=o>&gt;?</span> <span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnSuccessOne</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onSuccess</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnErrorOne</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onError</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>DataRequestLabel</span><span class=o>?</span> <span class=n>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>The <code>remote</code>, <code>params</code>, <code>headers</code>, <code>onSuccess</code>, <code>onError</code> and <code>label</code> arguments are detailed in <a href=#common-arguments>common arguments</a> below.</p><p>ðŸ“š <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/save.html>See API docs</a></p><h3 id=delete>delete</h3><p>Deletes a model from local storage and sends a <code>DELETE</code> HTTP request.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>await</span> <span class=n>repository</span><span class=p>.</span><span class=n>delete</span><span class=p>(</span><span class=n>model</span><span class=p>);</span>
</span></span></code></pre></div><p>Method signature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Future</span><span class=o>&lt;</span><span class=n>T</span><span class=o>?&gt;</span> <span class=n>delete</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kt>Object</span> <span class=n>model</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>remote</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;?</span> <span class=n>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>String</span><span class=o>&gt;?</span> <span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnSuccessOne</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onSuccess</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>OnErrorOne</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>onError</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>DataRequestLabel</span><span class=o>?</span> <span class=n>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>The <code>remote</code>, <code>params</code>, <code>headers</code>, <code>onSuccess</code>, <code>onError</code> and <code>label</code> arguments are detailed in <a href=#common-arguments>common arguments</a> below.</p><p>ðŸ“š <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/delete.html>See API docs</a></p><h2 id=watchers>Watchers</h2><p><code>DataState</code> is a class that holds state related to resource fetching and is practical in UI applications. It is returned in <code>watchAll</code> and <code>watchOne</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>class</span> <span class=nc>DataState</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=kd>with</span> <span class=n>EquatableMixin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>T</span> <span class=n>model</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span> <span class=n>isLoading</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>DataException</span><span class=o>?</span> <span class=n>exception</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>StackTrace</span><span class=o>?</span> <span class=n>stackTrace</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>It&rsquo;s typically used in a widget&rsquo;s <code>build</code> method like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MyApp</span> <span class=kd>extends</span> <span class=n>HookConsumerWidget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=n>Widget</span> <span class=n>build</span><span class=p>(</span><span class=n>BuildContext</span> <span class=n>context</span><span class=p>,</span> <span class=n>WidgetRef</span> <span class=n>ref</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>state</span> <span class=o>=</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>watchAll</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>state</span><span class=p>.</span><span class=n>isLoading</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>CircularProgressIndicator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>state</span><span class=p>.</span><span class=n>hasException</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>ErrorScreen</span><span class=p>(</span><span class=n>state</span><span class=p>.</span><span class=n>exception</span><span class=p>,</span> <span class=n>state</span><span class=p>.</span><span class=n>stackTrace</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ListView</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nl>children:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kd>final</span> <span class=n>task</span> <span class=k>in</span> <span class=n>state</span><span class=p>.</span><span class=n>model</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=n>Text</span><span class=p>(</span><span class=n>task</span><span class=p>.</span><span class=n>title</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><p>Why not used a <a href=https://pub.dev/packages/freezed#union-types-and-sealed-classes>Freezed union</a> instead?</p><p>Because without forcing to branch, <code>DataState</code> easily allows rebuilding widgets when multiple substates happen simultaneously â€“ a very common pattern. The tradeoff is having to remember to check for the <code>loading</code> and <code>error</code> substates.</p></div><h3 id=watchall>watchAll</h3><p>Watches all models of a given type in local storage (through <code>ref.watch</code> and <code>watchAllNotifier</code>).</p><p>For updates to any model of type <code>Task</code> to prompt a rebuild we can use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>class</span> <span class=nc>TasksScreen</span> <span class=kd>extends</span> <span class=n>HookConsumerWidget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=n>Widget</span> <span class=n>build</span><span class=p>(</span><span class=n>BuildContext</span> <span class=n>context</span><span class=p>,</span> <span class=n>WidgetRef</span> <span class=n>ref</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>state</span> <span class=o>=</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>watchAll</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>state</span><span class=p>.</span><span class=n>isLoading</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>CircularProgressIndicator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// use state.model which is a List&lt;Task&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p>By default when first rendered it triggers a background <a href=#findall><code>findAll</code></a> call with <code>remote</code>, <code>params</code>, <code>headers</code>, <code>syncLocal</code> and <code>label</code> arguments. See <a href=#common-arguments>common arguments</a>.</p><p>Method signature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>DataState</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?&gt;</span> <span class=n>watchAll</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>remote</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;?</span> <span class=n>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>String</span><span class=o>&gt;?</span> <span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>syncLocal</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span><span class=o>?</span> <span class=n>finder</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>DataRequestLabel</span><span class=o>?</span> <span class=n>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>But this can easily be overridden. Any method in the <a href=/docs/adapters>adapter</a> with the <strong>exact <a href=#findall><code>findAll</code></a> method signature</strong> and annotated with <code>@DataFinder()</code> will be available to supply to the <code>finder</code> argument as a string (method name).</p><p>Pass <code>remote: false</code> to prevent any remote fetch at all.</p><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><strong>Note:</strong> Both <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/watchAllProvider.html><code>watchAllProvider</code></a> and <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/watchAllNotifier.html><code>watchAllNotifier</code></a> are also available.</div><p>ðŸ“š <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/watchAll.html>See API docs</a></p><h3 id=watchone>watchOne</h3><p>Watches a model of a given type in local storage (through <code>ref.watch</code> and <code>watchOneNotifier</code>).</p><p>For updates to a given model of type <code>Task</code> to prompt a rebuild we can use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>class</span> <span class=nc>TaskScreen</span> <span class=kd>extends</span> <span class=n>HookConsumerWidget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=n>Widget</span> <span class=n>build</span><span class=p>(</span><span class=n>BuildContext</span> <span class=n>context</span><span class=p>,</span> <span class=n>WidgetRef</span> <span class=n>ref</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>state</span> <span class=o>=</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>watchOne</span><span class=p>(</span><span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>state</span><span class=p>.</span><span class=n>isLoading</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>CircularProgressIndicator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// use state.model which is a Task
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p>By default when first rendered it triggers a background <a href=#findone><code>findOne</code></a> call with <code>model</code>, <code>remote</code>, <code>params</code>, <code>headers</code> and <code>label</code> arguments. See <a href=#common-arguments>common arguments</a>.</p><p>Method signature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>DataState</span><span class=o>&lt;</span><span class=n>T</span><span class=o>?&gt;</span> <span class=n>watchOne</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kt>Object</span> <span class=n>model</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>bool</span><span class=o>?</span> <span class=n>remote</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>dynamic</span><span class=o>&gt;?</span> <span class=n>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span> <span class=kt>String</span><span class=o>&gt;?</span> <span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>AlsoWatch</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;?</span> <span class=n>alsoWatch</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kt>String</span><span class=o>?</span> <span class=n>finder</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>DataRequestLabel</span><span class=o>?</span> <span class=n>label</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>But this can easily be overridden. Any method in the <a href=/docs/adapters>adapter</a> with the <strong>exact <a href=#findone><code>findOne</code></a> method signature</strong> and annotated with <code>@DataFinder()</code> will be available to supply to the <code>finder</code> argument as a string (method name).</p><p>Pass <code>remote: false</code> to prevent any remote fetch at all.</p><p>In addition, this watcher can react to relationships via <code>alsoWatch</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>watchOneNotifier</span><span class=p>(</span><span class=m>3</span><span class=p>,</span> <span class=nl>alsoWatch:</span> <span class=p>(</span><span class=n>task</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=n>task</span><span class=p>.</span><span class=n>user</span><span class=p>]);</span>
</span></span></code></pre></div><p>This feature is extremely powerful, actually any number of relationships can be watched:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>watchOneNotifier</span><span class=p>(</span><span class=m>3</span><span class=p>,</span> <span class=nl>alsoWatch:</span> <span class=p>(</span><span class=n>task</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=n>task</span><span class=p>.</span><span class=n>reminders</span><span class=p>,</span> <span class=n>task</span><span class=p>.</span><span class=n>user</span><span class=p>,</span> <span class=n>task</span><span class=p>.</span><span class=n>user</span><span class=p>.</span><span class=n>profile</span><span class=p>,</span> <span class=n>task</span><span class=p>.</span><span class=n>user</span><span class=p>.</span><span class=n>profile</span><span class=p>.</span><span class=n>comments</span><span class=p>]);</span>
</span></span></code></pre></div><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><strong>Note:</strong> Both <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/watchOneProvider.html><code>watchOneProvider</code></a> and <a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/Repository/watchOneNotifier.html><code>watchOneNotifier</code></a> are also available.</div><h3 id=watch>watch</h3><p>This method takes a <code>DataModel</code> and watches its local changes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>class</span> <span class=nc>TaskScreen</span> <span class=kd>extends</span> <span class=n>HookConsumerWidget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>final</span> <span class=n>Task</span> <span class=n>model</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=err>@</span><span class=n>override</span>
</span></span><span class=line><span class=cl>  <span class=n>Widget</span> <span class=n>build</span><span class=p>(</span><span class=n>BuildContext</span> <span class=n>context</span><span class=p>,</span> <span class=n>WidgetRef</span> <span class=n>ref</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>task</span> <span class=o>=</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>watch</span><span class=p>(</span><span class=n>model</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Text</span><span class=p>(</span><span class=n>task</span><span class=p>.</span><span class=n>title</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p>Note that it returns a model, not a <code>DataState</code>.</p><h3 id=notifierfor>notifierFor</h3><p>Obtain the notifier for a model. Does not trigger a remote request.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>notifier</span> <span class=o>=</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>notifierFor</span><span class=p>(</span><span class=n>task</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// equivalent to
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>watchOneNotifier</span><span class=p>(</span><span class=n>task</span><span class=p>,</span> <span class=nl>remote:</span> <span class=kc>false</span><span class=p>);</span>
</span></span></code></pre></div><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><p>By default, changes will be notified immediately and trigger widget rebuilds.</p><p>For performance improvements, they can be throttled <a href=/docs/initialization>by overriding <code>graphNotifierThrottleDurationProvider</code></a>.</p></div><h2 id=common-arguments>Common arguments</h2><h3 id=remote>remote</h3><p>Request only models in local storage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>tasks</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>findAll</span><span class=p>(</span><span class=nl>remote:</span> <span class=kc>false</span><span class=p>);</span>
</span></span></code></pre></div><p>Argument is of type <code>bool</code> and the default is <code>true</code>.</p><div class="notice leading-relaxed bg-flutter-yellow py-4 px-6 my-8 rounded-md"><p>In addition to adapters, the <code>@DataRepository</code> annotation can take a <code>remote</code> boolean argument which will make it the default for the repository.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=err>@</span><span class=n>DataRepository</span><span class=p>([</span><span class=n>TaskAdapter</span><span class=p>],</span> <span class=nl>remote:</span> <span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Task</span> <span class=kd>extends</span> <span class=n>DataModel</span><span class=o>&lt;</span><span class=n>Task</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// by default no operation hits the remote endpoint
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div></div><h3 id=background>background</h3><p>Default <code>false</code>. Calling a finder with <code>background = true</code> will make it return immediately with the current value in local storage while triggering a remote request in the background. This is typically useful when using this primitive in certain adapter customizations.</p><h3 id=params>params</h3><p>Include query parameters (of type <code>Map&lt;String, dynamic></code>, in this case used for pagination and resource inclusion):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>tasks</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>findAll</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nl>params:</span> <span class=p>{</span><span class=s1>&#39;include&#39;</span><span class=o>:</span> <span class=s1>&#39;comments&#39;</span><span class=p>,</span> <span class=s1>&#39;page&#39;</span><span class=o>:</span> <span class=p>{</span> <span class=s1>&#39;limit&#39;</span><span class=o>:</span> <span class=m>20</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GET http://base.url/tasks?include=comments&amp;page[limit]=20
</span></span></span></code></pre></div><h3 id=headers>headers</h3><p>Include HTTP headers as a <code>Map&lt;String, String></code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>tasks</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>findAll</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nl>headers:</span> <span class=p>{</span> <span class=s1>&#39;Authorization&#39;</span><span class=o>:</span> <span class=s1>&#39;t0k3n&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h3 id=onsuccess>onSuccess</h3><p>Overrides the handler for the success state, useful when requiring a specific transformation of raw response data.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>save</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>task</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nl>onSuccess:</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>adapter</span><span class=p>)</span> <span class=kd>async</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>model</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>adapter</span><span class=p>.</span><span class=n>onSuccess</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>model</span> <span class=o>as</span> <span class=n>Task</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p><a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/RemoteAdapter/onSuccess.html><code>RemoteAdapter#onSuccess</code></a> is the default (overridable, of course). It esentially boils down to calls to <code>deserialize</code>.</p><h3 id=onerror>onError</h3><p>Overrides the error handler:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>await</span> <span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>save</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>task</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nl>onError:</span> <span class=p>(</span><span class=n>error</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>adapter</span><span class=p>)</span> <span class=kd>async</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=n>WrappedException</span><span class=p>(</span><span class=n>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p><a href=https://pub.dev/documentation/flutter_data/latest/flutter_data/RemoteAdapter/onError.html><code>RemoteAdapter#onError</code></a> is the default (overridable, of course). It essentially rethrows the error except if it is due to loss of connectivity or the remote resource was not found (HTTP 404).</p><h3 id=label>label</h3><p>Optional argument of type <code>DataRequestLabel</code>. <a href=#logging-and-labels>See below</a>.</p><h2 id=logging-and-labels>Logging and labels</h2><p>Labels are used in Flutter Data to easily track requests in logs. They carry an auto-generated <code>requestId</code> along with type and ID. They are provided by default and also by default finders log different events.</p><p>Some examples:</p><ul><li><code>findAll/tasks@b5d14c</code></li><li><code>findOne/users#3@c4a1bb</code></li><li><code>findAll/tasks@b5d14c&lt;c4a1bb</code></li></ul><p>Request IDs can be nested like the last one above, where the <code>b5d14c</code> call happened inside <code>c4a1bb</code>. In other words, during the request for <code>User</code> with ID <code>3</code>, a collection of tasks was also requested (presumably for that same user).</p><p>In the console these would be logged as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>flutter: 05:961   [findAll/tasks@b5d14c] requesting
</span></span><span class=line><span class=cl>flutter: 05:973   [findOne/users#3@c4a1bb] requesting
</span></span><span class=line><span class=cl>flutter: 05:974     [findAll/tasks@b5d14c&lt;c4a1bb] requesting
</span></span></code></pre></div><p>with the nested labels properly indented.</p><p><a href=#watchers>Watchers</a> also output useful logs in level 1 and 2.</p><p>Log levels can be set via the <code>logLevel</code> argument in <code>log</code>, and to adjust the global level:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>logLevel</span> <span class=o>=</span> <span class=m>2</span><span class=p>;</span>
</span></span></code></pre></div><p>In order to log custom information use something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=kd>final</span> <span class=n>label</span> <span class=o>=</span> <span class=n>DataRequestLabel</span><span class=p>(</span><span class=s1>&#39;save&#39;</span><span class=p>,</span> <span class=nl>type:</span> <span class=s1>&#39;users&#39;</span><span class=p>,</span> <span class=nl>id:</span> <span class=s1>&#39;3&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>log</span><span class=p>(</span><span class=n>label</span><span class=p>,</span> <span class=s1>&#39;testing labels&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// or
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=n>nestedLabel1</span> <span class=o>=</span> <span class=n>DataRequestLabel</span><span class=p>(</span><span class=s1>&#39;findAll&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nl>type:</span> <span class=s1>&#39;other&#39;</span><span class=p>,</span> <span class=nl>requestId:</span> <span class=s1>&#39;ff01b1&#39;</span><span class=p>,</span> <span class=nl>withParent:</span> <span class=n>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>ref</span><span class=p>.</span><span class=n>tasks</span><span class=p>.</span><span class=n>log</span><span class=p>(</span><span class=n>label</span><span class=p>,</span> <span class=s1>&#39;testing nested labels&#39;</span><span class=p>,</span> <span class=nl>logLevel:</span> <span class=m>2</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=local-adapters>Local adapters</h2><p>See <a href=/docs/local-adapters>Local Adapters</a>.</p><h2 id=graph>Graph</h2><p>Flutter Data uses a reactive bidirectional graph data structure to keep track of relationships and key-ID mappings. Changes on this graph will trigger updates to the <a href=#watchers>watchers</a>, by default once per change but a throttle can be configured to prevent superfluous re-renders.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>graphNotifierThrottleDurationProvider</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=n>overrideWithValue</span><span class=p>(</span><span class=n>Duration</span><span class=p>(</span><span class=nl>milliseconds:</span> <span class=m>100</span><span class=p>)),</span>
</span></span></code></pre></div><h2 id=architecture-overview>Architecture overview</h2><p>This is the dependency graph for an app with models <code>User</code> and <code>Task</code>:</p><p class=py-6><img src=/images/deps.png style=max-width:650px></p><p>Clients should only interact with repositories and adapters, while using the <a href=/docs/adapters>Adapter API</a> to customize behavior.</p></div></div></div></div><footer class="py-12 mt-20 text-white bg-gray-900 pattern"><div class="w-full max-w-6xl relative mx-auto pl-2 pr-4 md:pl-4 md:pr-6"><div class="flex items-center"><div class="lg:w-1/4 pl-6 pr-4 sm:pr-12 lg:pr-8"></div><div class="flex flex-grow min-w-0 lg:w-3/4"><div class="w-full lg:px-2"><p><a class=inline-block href=https://github.com/flutterdata/flutter_data/actions><img alt=tests src="https://img.shields.io/github/actions/workflow/status/flutterdata/flutter_data/test.yml?branch=master"></a>
<a class=inline-block href=https://codecov.io/gh/flutterdata/flutter_data rel=nofollow><img alt=codecov src=https://codecov.io/gh/flutterdata/flutter_data/branch/master/graph/badge.svg style=max-width:100%></a>
<a class=inline-block href=https://pub.dev/packages/flutter_data rel=nofollow><img alt=pub.dev src="https://img.shields.io/pub/v/flutter_data?label=pub.dev&amp;labelColor=333940&amp;logo=dart" style=max-width:100%></a>
<a class=inline-block href=https://github.com/flutterdata/flutter_data/blob/master/LICENSE><img alt=license src="https://img.shields.io/github/license/flutterdata/flutter_data?color=%23007A88&amp;labelColor=333940&amp;logo=mit" style=max-width:100%></a></p><p class=text-sm>Created and maintained by <a href=https://github.com/frank06/>frank06</a>.</p></div><div class="hidden lg:flex lg:items-center lg:justify-between px-6"><h1 class="mt-2 whitespace-no-wrap"><img class=inline style=object-fit:cover;width:100% src=/images/fd.png></h1></div></div></div></div></footer><script>const _open=function(){document.getElementById("sidebar").classList.remove("hidden"),document.getElementById("wrapper").classList.add("overflow-hidden","max-h-screen","fixed"),document.getElementById("sidebar-open").classList.toggle("hidden"),document.getElementById("sidebar-close").classList.toggle("hidden")},_close=function(){document.getElementById("sidebar").classList.add("hidden"),document.getElementById("wrapper").classList.remove("overflow-hidden","max-h-screen","fixed"),document.getElementById("sidebar-open").classList.toggle("hidden"),document.getElementById("sidebar-close").classList.toggle("hidden")};document.getElementById("sidebar-open").onclick=_open,document.getElementById("sidebar-close").onclick=_close,[].forEach.call(document.querySelectorAll('a[href^="#"]'),e=>{e.onclick=_close}),window.domReady=function(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener("DOMContentLoaded",e)},window.domReady(function(){for(var n,s,t=document.links,o=new RegExp("//"+location.host+"($|/)"),e=0;e<t.length;e++)n=t[e].href,s=n.substring(0,4)!=="http"||o.test(n),s||(t[e].target="_blank")}),window.submitContact=function(e){var n,s="/";return!1&&(s="(signup url)"),n=new FormData(e),n.set("url",window.location.href),fetch(s,{method:"POST",mode:"no-cors",body:n}).then(t=>{e.querySelector(".form-success").style.display="block"}).catch(()=>{e.querySelector(".form-error").style.display="block"}).finally(()=>{[].slice.call(e.querySelectorAll(".initial")).forEach(function(e){e.style.display="none"})}),!1}</script></body></html>